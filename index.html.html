<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PRAXI Human Touch - Esperienza Cliente</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #eef1f8; /* COOL GREY */
      color: #002855; /* PRAXI BLUE */
    }
    .header {
      position: sticky;
      top: 0;
      z-index: 1000;
      background-color: #002855; /* PRAXI BLUE */
      color: #ffffff; /* WHITE */
      padding: 10px 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }
    .logo-box {
      border: 2px solid #cce97f; /* WASABI GREEN */
      padding: 4px 8px;
      font-weight: bold;
      font-size: 14px;
    }
    .title {
      margin-left: 16px;
      font-size: 16px;
      font-weight: bold;
    }
    .container {
      max-width: 900px;
      margin: 20px auto 40px auto;
      background-color: #ffffff; /* WHITE */
      border-radius: 8px;
      padding: 20px 24px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    }
    .intro {
      margin-bottom: 20px;
      line-height: 1.5;
    }
    .section-text {
      font-size: 14px;
      margin-bottom: 4px;
      color: #002855;
      font-weight: bold;
    }
    .question-number {
      font-weight: bold;
      margin-bottom: 8px;
      color: #002855;
    }
    .question-text {
      font-size: 16px;
      margin-bottom: 16px;
    }
    .scale-label {
      font-size: 14px;
      margin-bottom: 8px;
    }
    .options {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-bottom: 20px;
    }
    .option-label {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 10px;
      border-radius: 6px;
      border: 1px solid #eef1f8;
      background-color: #eef1f8;
      cursor: pointer;
    }
    .option-label:hover {
      border-color: #002855;
    }
    .option-label input {
      accent-color: #002855;
    }
    .buttons {
      display: flex;
      justify-content: space-between;
      margin-top: 10px;
    }
    button {
      border: none;
      border-radius: 4px;
      padding: 8px 16px;
      font-size: 14px;
      cursor: pointer;
      font-weight: bold;
    }
    .btn-primary {
      background-color: #002855; /* PRAXI BLUE */
      color: #ffffff; /* WHITE */
    }
    .btn-primary:disabled {
      background-color: #eef1f8;
      color: #002855;
      cursor: not-allowed;
    }
    .btn-secondary {
      background-color: #cce97f; /* WASABI GREEN */
      color: #002855; /* PRAXI BLUE */
    }
    .progress-text {
      font-size: 13px;
      margin-bottom: 12px;
      color: #002855;
    }
    .results-title {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 10px;
    }
    .result-item {
      margin-bottom: 16px;
    }
    .result-label {
      font-size: 14px;
      margin-bottom: 4px;
    }
    .bar {
      width: 100%;
      background-color: #eef1f8; /* COOL GREY */
      border-radius: 6px;
      overflow: hidden;
      height: 18px;
    }
    .bar-fill {
      height: 100%;
      width: 0;
      background-color: #cce97f; /* WASABI GREEN */
      transition: width 0.6s ease;
    }
    .score-text {
      font-size: 12px;
      margin-top: 4px;
      color: #002855;
    }
    .results-buttons {
      margin-top: 20px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    @media (max-width: 600px) {
      .container {
        margin: 10px;
        padding: 16px;
      }
      .header {
        flex-direction: column;
        align-items: flex-start;
        gap: 6px;
      }
      .title {
        margin-left: 0;
      }
    }
  </style>
</head>
<body>
  <div class="header">
    <div class="logo-box">PRAXI</div>
    <div class="title">Human Touch - Esperienza del cliente in agenzia</div>
  </div>

  <div class="container">
    <div id="intro-screen" class="intro">
      <p><strong>PRAXI Human Touch - Valuta l'esperienza del tuo/della tua cliente!</strong></p>
      <p>Benvenuto/a nel test per valutare l'esperienza dei tuoi clienti! Il modo in cui i clienti percepiscono la tua agenzia è essenziale per la loro fiducia e fedeltà. Ti invitiamo a valutare la tua attività mettendoti nei panni dei clienti, dimenticando i processi interni e concentrandoti solo sul loro vissuto.</p>
      <p>Troverai una serie di affermazioni che riflettono l’esperienza del cliente con la tua agenzia. Valutale su una scala da 1 a 4 stelle, dove:</p>
      <ul>
        <li>⭐ Completamente in disaccordo</li>
        <li>⭐⭐ Parzialmente in disaccordo</li>
        <li>⭐⭐⭐ D’accordo</li>
        <li>⭐⭐⭐⭐ Completamente d’accordo</li>
      </ul>
      <p>Questa riflessione ti aiuterà a individuare punti di forza e aree di miglioramento per offrire un servizio sempre più efficace e vicino alle esigenze dei clienti.</p>
      <p><strong>Buona valutazione!</strong></p>
      <button class="btn-primary" onclick="startQuestionnaire()">Inizia il questionario (nuovo)</button>
      <button class="btn-secondary" id="resume-btn" style="display:none; margin-left:8px;" onclick="resumeQuestionnaire()">Riprendi questionario salvato</button>
      <button class="btn-secondary" style="margin-left:8px;" onclick="clearSaved();">Cancella dati salvati</button>
    </div>

    <div id="question-screen" style="display:none;">
      <div class="section-text" id="section-text"></div>
      <div class="question-number" id="question-number"></div>
      <div class="progress-text" id="progress-text"></div>
      <div class="question-text" id="question-text"></div>
      <div class="scale-label">Seleziona il tuo livello di accordo:</div>
      <div class="options">
        <label class="option-label">
          <input type="radio" name="rating" value="1" onchange="onOptionChange()" />
          <span>⭐ Completamente in disaccordo</span>
        </label>
        <label class="option-label">
          <input type="radio" name="rating" value="2" onchange="onOptionChange()" />
          <span>⭐⭐ Parzialmente in disaccordo</span>
        </label>
        <label class="option-label">
          <input type="radio" name="rating" value="3" onchange="onOptionChange()" />
          <span>⭐⭐⭐ D’accordo</span>
        </label>
        <label class="option-label">
          <input type="radio" name="rating" value="4" onchange="onOptionChange()" />
          <span>⭐⭐⭐⭐ Completamente d’accordo</span>
        </label>
      </div>
      <div class="buttons">
        <button class="btn-secondary" onclick="goBack()">Indietro</button>
        <button class="btn-primary" id="next-btn" onclick="goNext()" disabled>Avanti</button>
      </div>
    </div>

    <div id="results-screen" style="display:none;">
      <div class="results-title">Le tue 6 aree di esperienza cliente</div>
      <p>Di seguito vedi il livello medio di accordo per ciascuna dimensione. Le barre mostrano quanto, in media, ti riconosci nelle affermazioni di ogni area.</p>
      <div id="results-container"></div>
      <div class="results-buttons">
        <button class="btn-secondary" onclick="restart()">Ricomincia</button>
        <button class="btn-primary" onclick="downloadResultsImage()">Scarica immagine del risultato</button>
      </div>
    </div>
  </div>

  <script>
    const questions = [{"dimension": "PERSONALIZZAZIONE", "text": "Nelle diverse interazioni con l'agenzia mi sento sempre riconosciuto e accolto per la mia identità, la mia cultura e le mie aspettative (Mi chiamano per nome. Valorizzano le informazioni che hanno utili a rispondere e soddisfare le mie richieste, ...)."}, {"dimension": "PERSONALIZZAZIONE", "text": "L'agenzia conosce la mia storia e le interazioni precedenti. (Non mi accade di dover ripetere più volte la stessa informazione, parlando con persone diverse o usando diversi canali, ...)."}, {"dimension": "PERSONALIZZAZIONE", "text": "A fronte di una mia richiesta ricevo un servizio/prodotto/soluzione in linea con la mia identità, la mia cultura e per me sostenibile. (Il prodotto, il servizio o la soluzione sono esattamente quello che mi serve. La soluzione offerta è coerente alle mie caratteristiche/processi interni. La soluzione è sostenibile e genera un beneficio evidente, ...)."}, {"dimension": "PERSONALIZZAZIONE", "text": "L'agenzia conosce nel dettaglio le mie dinamiche decisionali, i miei interessi e le mie preferenze (La soluzione proposta tiene in considerazione le mie scelte precedenti e le preferenze che ho già espresso. La soluzione proposta mi permette di generare valore per me o per i miei clienti)."}, {"dimension": "PERSONALIZZAZIONE", "text": "L'agenzia comunica con me esattamente nella forma, nei tempi e attraverso i canali che sono a me più affini e che meglio rispondono alle mie esigenze e preferenze. (Mi garantiscono la mia privacy e non mi interrompono quando non lo desidero. Accade che quando sento di avere bisogno siano loro a contattarmi. Posso scegliere e modificare le modalità - canali e tempi - di comunicazione che desidero siano utilizzate per comunicare con me, ...)."}, {"dimension": "INTEGRITÀ", "text": "L'agenzia mantiene sempre le promesse assunte con me (Anche se ho avuto dei problemi l'azienda ha dimostrato impegno e desiderio di risolverli. Sono sicura/o che quello che mi offrono e mi propongono è sempre realizzabile nei tempi e nella qualità promessa. Non creano false aspettative, considerano le reali possibilità, realizzano e rendono concreta l'aspettativa, ...)."}, {"dimension": "INTEGRITÀ", "text": "Il comportamento e le azioni dell'agenzia sono sempre coerenti e ispirate da principi e valori che condivido (Il personale non giudica e non critica altre agenzie competitor e l'agenzia stessa, ...)."}, {"dimension": "INTEGRITÀ", "text": "L'agenzia comunica con me in modo trasparente e mi mette a disposizione tutte le informazioni che mi servono per fare le scelte migliori per me (Sul loro sito o sui loro social trovo contenuti che mi aiutano a fare le scelte giuste. Il personale è affidabile e competente. Le mie informazioni in loro possesso sono visibili anche a me, ...)."}, {"dimension": "INTEGRITÀ", "text": "L'agenzia ha a cuore l'interesse generale e non solo il proprio, è attenta alla sostenibilità delle proprie scelte, si prende cura delle sue persone e rispetta e sostiene le comunità in cui opera. (L'agenzia persegue interessi di tipo sociale, aiuta le persone in difficoltà, distribuisce una parte del proprio profitto ad iniziative di sostegno e di ricerca. L'agenzia è impegnata nella sostenibilità dei propri prodotti e processi. L'agenzia si affida a fornitori eticamente ineccepibili. L'agenzia tratta con rispetto e garantisce il benessere delle persone che vi lavorano)."}, {"dimension": "COINVOLGIMENTO", "text": "L'agenzia è coinvolgente nel modo in cui si racconta e diffonde i propri valori, prodotti e servizi (La storia che mi trasmette è emotivamente ingaggiante, sono felice di ascoltarli, ...)."}, {"dimension": "COINVOLGIMENTO", "text": "L'agenzia chiede la mia opinione e verifica costantemente la mia esperienza con il prodotto, con il servizio e con il personale. (Mi coinvolge in survey per raccogliere la mia/nostra soddisfazione. Verifica la risoluzione di un problema riportato. Mi chiede feedback rispetto all'esperienza con il prodotto/servizio anche quando non sono io a sollecitarlo o a fare un reclamo, ...)."}, {"dimension": "COINVOLGIMENTO", "text": "L'agenzia usa diversi canali per comunicare informazioni per me interessanti, per stimolare una conversazione, per condividere con me delle esperienze (incontri di persona, email, telefono, social, eventi, anniversari ecc)."}, {"dimension": "COINVOLGIMENTO", "text": "Mi sento parte dell'agenzia, provo un legame profondo che va oltre la mera transazione economica."}, {"dimension": "COINVOLGIMENTO", "text": "L'agenzia mi coinvolge nella soluzione dei problemi (incoraggia la mia partecipazione, chiede la mia opinione e i miei obiettivi, ricerca in modo diretto e trasparente le informazioni, ...)."}, {"dimension": "REALIZZAZIONE", "text": "L'agenzia riconosce e valorizza i miei desideri/ambizioni (asseconda le mie scelte, mi supporta nella scelta, rispetta la mia scelta,…)."}, {"dimension": "REALIZZAZIONE", "text": "Il personale dell'agenzia è entusiasta di aiutarmi a capire quello di cui ho realmente bisogno/ha bisogno la mia azienda (mi pone domande che vanno oltre il prodotto/servizio richiesto, mi guida nei ragionamenti, mi lascia riflettere, ...)."}, {"dimension": "REALIZZAZIONE", "text": "Le mie opinioni o idee/le opinioni o idee della mia azienda, sono messe in discussione e 'sfidate' quando rischiano di rallentare od ostacolare il raggiungimento degli obiettivi (mi rendono evidenti i rischi che non percepisco, mi forniscono una visione fresca e oggettiva dei problemi, ...)."}, {"dimension": "REALIZZAZIONE", "text": "L'agenzia mette a disposizione le competenze e le energie necessarie per realizzare i miei obiettivi/ gli obiettivi aziendali (Non si tira indietro, ricerca strategie/soluzioni alternative e o innovative quando necessario, le sue competenze evolvono per seguire i cambiamenti del mercato e del contesto sociale e culturale, ...)."}, {"dimension": "REALIZZAZIONE", "text": "Attraverso la collaborazione con l'agenzia conosco, miglioro, cresco, evolvo, innovo."}, {"dimension": "AGILITÀ", "text": "L'agenzia è accessibile e mi mette a disposizione canali di accesso differenti e orari adeguati alle mie esigenze."}, {"dimension": "AGILITÀ", "text": "L'agenzia evolve velocemente i propri processi interni per migliorare costantemente la sua competenza, la sua capacità di soddisfarmi e di anticipare le mie esigenze."}, {"dimension": "AGILITÀ", "text": "Il tempo che ho a disposizione è gestito efficacemente (Sono precisi e tempestivi nel rispondere alle mie domande, posso interagire con un interlocutore che poi ricerca direttamente le risposte necessarie e me le fornisce, sono puntuali nella pianificazione di appuntamenti e riunioni, non mi fanno perdere tempo, mi dedicano un'adeguata attenzione, ...)."}, {"dimension": "AGILITÀ", "text": "Sono dotati di strumenti informativi adeguati che gli consentono di operare in modo agile, trovare velocemente le informazioni quando necessario, semplificare i processi e renderli fluidi (Non devo ripetermi, posso spostarmi fra un canale e l'altro senza che le informazioni si perdano, hanno sempre le informazioni più aggiornate, sono veloci, non mi accorgo quasi della complessità e delle criticità che possono avvenire, ...)."}, {"dimension": "AGILITÀ", "text": "Quando si presenta un problema l'agenzia si attiva tempestivamente per ricercare la soluzione più idonea (il problema viene subito affrontato, la ricerca della soluzione non viene rimandata nel tempo o lasciata alla disponibilità del singolo, tutte le competenze vengono messe a dispozione per la ricerca della soluzione, ...)."}, {"dimension": "EMPATIA", "text": "Nelle diverse interazioni con l'agenzia mi sento a mio agio (Non mi sento giudicato/a, mi sento competente e adeguato/a, sento che l'agenzia è felice di relazionarsi con me, ...)."}, {"dimension": "EMPATIA", "text": "L'agenzia mi ascolta con attenzione (mi sento compreso/a, mi sento importante, l'interlocutore mi pone domande, è curioso e interessato a me, non vengo interrotto/a, ...)."}, {"dimension": "EMPATIA", "text": "Le mie emozioni sono accolte e valorizzate in modo spontaneo e autentico (Se sono entusiasta, frustrata/o, spaventata/o, preoccupata/o, arrabbiata/o l'interlocutore adatta la sua relazione e la sua comunicazione con me per darmi conforto, ...)."}, {"dimension": "EMPATIA", "text": "In caso di problemi o esigenze l'agenzia è pronta a venirmi incontro (deroga regole e procedure standard per soddisfare esigenze specifiche, se è necessario è flessibile sugli orari e mi permette di essere ricevuto anche senza appuntamento, mi consente di interagire e comunicare con le persone in modo meno formale, le persone dell'azienda hanno un margine di autonomia per avvicinarsi a me, ...)."}, {"dimension": "EMPATIA", "text": "Sento di non essere solo/a. L'agenzia, nelle diverse fasi, è presente e mi supporta (Ho un contatto a cui poter fare riferimento, gestisce i tempi morti/le attese, mi mettono a disposizione le loro competenze e mi consigliano, ...)."}];

    let currentIndex = 0;
    const answers = new Array(questions.length).fill(null);

    const dimensions = [
      'PERSONALIZZAZIONE',
      'INTEGRITÀ',
      'COINVOLGIMENTO',
      'REALIZZAZIONE',
      'AGILITÀ',
      'EMPATIA'
    ];

    const sectionMap = {};
    dimensions.forEach(function(d) { sectionMap[d] = []; });
    questions.forEach(function(q, index) {
      if (sectionMap.hasOwnProperty(q.dimension)) {
        sectionMap[q.dimension].push(index);
      }
    });

    const STORAGE_KEY = 'praxi_human_touch_state';
    let lastResultsData = null;

    document.addEventListener('DOMContentLoaded', function() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        if (raw) {
          const resumeBtn = document.getElementById('resume-btn');
          if (resumeBtn) resumeBtn.style.display = 'inline-block';
        }
      } catch (e) {
      }
    });

    function saveState() {
      try {
        const state = { answers: answers, currentIndex: currentIndex };
        localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
      } catch (e) {}
    }

    function loadState() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        if (!raw) return null;
        const state = JSON.parse(raw);
        if (!state || !Array.isArray(state.answers)) return null;
        const loadedAnswers = new Array(questions.length).fill(null);
        state.answers.forEach(function(v, i) {
          if (i < loadedAnswers.length && (v === 1 || v === 2 || v === 3 || v === 4)) {
            loadedAnswers[i] = v;
          }
        });
        let idx = parseInt(state.currentIndex, 10);
        if (isNaN(idx) || idx < 0) idx = 0;
        if (idx >= questions.length) idx = questions.length - 1;
        return { answers: loadedAnswers, currentIndex: idx };
      } catch (e) {
        return null;
      }
    }

    function clearSaved() {
      try {
        localStorage.removeItem(STORAGE_KEY);
      } catch (e) {}
      const resumeBtn = document.getElementById('resume-btn');
      if (resumeBtn) resumeBtn.style.display = 'none';
    }

    function startQuestionnaire() {
      currentIndex = 0;
      for (let i = 0; i < answers.length; i++) {
        answers[i] = null;
      }
      clearSaved();
      document.getElementById('intro-screen').style.display = 'none';
      document.getElementById('question-screen').style.display = 'block';
      showQuestion();
    }

    function resumeQuestionnaire() {
      const state = loadState();
      if (state) {
        for (let i = 0; i < answers.length; i++) {
          answers[i] = state.answers[i];
        }
        currentIndex = state.currentIndex;
      } else {
        currentIndex = 0;
        for (let i = 0; i < answers.length; i++) {
          answers[i] = null;
        }
      }
      document.getElementById('intro-screen').style.display = 'none';
      document.getElementById('question-screen').style.display = 'block';
      showQuestion();
    }

    function showQuestion() {
      const q = questions[currentIndex];
      const dim = q.dimension;

      const sectionIndex = dimensions.indexOf(dim);
      const indices = sectionMap[dim] || [];
      const posInSection = indices.indexOf(currentIndex);
      const totalInSection = indices.length || 1;

      const sectionTextEl = document.getElementById('section-text');
      if (sectionTextEl) {
        sectionTextEl.textContent = 'Sezione ' + (sectionIndex + 1) + ' di ' + dimensions.length;
      }

      document.getElementById('question-number').textContent = 'Affermazione ' + (posInSection + 1) + ' di ' + totalInSection + ' nella sezione';
      document.getElementById('progress-text').textContent = 'Domanda ' + (currentIndex + 1) + ' di ' + questions.length + ' complessive';
      document.getElementById('question-text').textContent = q.text;

      const radios = document.querySelectorAll('input[name="rating"]');
      radios.forEach(function(r) { r.checked = false; });

      if (answers[currentIndex] !== null) {
        const toCheck = document.querySelector('input[name="rating"][value="' + answers[currentIndex] + '"]');
        if (toCheck) toCheck.checked = true;
        document.getElementById('next-btn').disabled = false;
      } else {
        document.getElementById('next-btn').disabled = true;
      }
    }

    function onOptionChange() {
      document.getElementById('next-btn').disabled = false;
    }

    function goNext() {
      const selected = document.querySelector('input[name="rating"]:checked');
      if (!selected) return;
      const value = parseInt(selected.value);
      answers[currentIndex] = value;
      saveState();

      if (currentIndex < questions.length - 1) {
        currentIndex++;
        showQuestion();
      } else {
        showResults();
      }
    }

    function goBack() {
      if (currentIndex === 0) return;
      const selected = document.querySelector('input[name="rating"]:checked');
      if (selected) {
        const value = parseInt(selected.value);
        answers[currentIndex] = value;
      }
      currentIndex--;
      saveState();
      showQuestion();
    }

    function showResults() {
      document.getElementById('question-screen').style.display = 'none';
      const resultsScreen = document.getElementById('results-screen');
      const container = document.getElementById('results-container');
      container.innerHTML = '';

      const sums = {};
      const counts = {};
      dimensions.forEach(function(d) {
        sums[d] = 0;
        counts[d] = 0;
      });

      questions.forEach(function(q, index) {
        const dim = q.dimension;
        const value = answers[index] || 0;
        if (counts.hasOwnProperty(dim)) {
          sums[dim] += value;
          if (value > 0) counts[dim] += 1;
        }
      });

      lastResultsData = [];

      dimensions.forEach(function(dim) {
        const totalItems = questions.filter(function(q) { return q.dimension === dim; }).length;
        const answeredCount = counts[dim] || 0;
        const sum = sums[dim] || 0;
        const effectiveCount = answeredCount || totalItems || 1;
        const avg = sum / effectiveCount;
        const percent = Math.max(0, Math.min(100, (avg / 4) * 100));

        lastResultsData.push({ name: dim, avg: avg, percent: percent });

        const wrapper = document.createElement('div');
        wrapper.className = 'result-item';

        const label = document.createElement('div');
        label.className = 'result-label';
        label.textContent = dim.charAt(0) + dim.slice(1).toLowerCase();
        wrapper.appendChild(label);

        const bar = document.createElement('div');
        bar.className = 'bar';
        const fill = document.createElement('div');
        fill.className = 'bar-fill';
        fill.style.width = percent + '%';
        bar.appendChild(fill);
        wrapper.appendChild(bar);

        const scoreText = document.createElement('div');
        scoreText.className = 'score-text';
        scoreText.textContent = 'Punteggio medio: ' + avg.toFixed(2) + ' su 4';
        wrapper.appendChild(scoreText);

        container.appendChild(wrapper);
      });

      resultsScreen.style.display = 'block';
      saveState();
    }

    function restart() {
      currentIndex = 0;
      for (let i = 0; i < answers.length; i++) {
        answers[i] = null;
      }
      clearSaved();
      document.getElementById('results-screen').style.display = 'none';
      document.getElementById('intro-screen').style.display = 'block';
    }

    function downloadResultsImage() {
      if (!lastResultsData || !lastResultsData.length) return;

      const canvas = document.createElement('canvas');
      const width = 800;
      const height = 80 + lastResultsData.length * 70;
      canvas.width = width;
      canvas.height = height;
      const ctx = canvas.getContext('2d');

      ctx.fillStyle = '#ffffff';
      ctx.fillRect(0, 0, width, height);

      ctx.fillStyle = '#002855';
      ctx.font = '20px Arial';
      ctx.fillText('PRAXI Human Touch - Risultati esperienza cliente', 20, 40);

      ctx.font = '14px Arial';
      let y = 80;

      lastResultsData.forEach(function(item) {
        const label = item.name.charAt(0) + item.name.slice(1).toLowerCase();
        const avgText = 'Punteggio medio: ' + item.avg.toFixed(2) + ' su 4';

        ctx.fillStyle = '#002855';
        ctx.fillText(label, 20, y);

        const barX = 20;
        const barY = y + 10;
        const barWidth = 600;
        const barHeight = 18;

        ctx.fillStyle = '#eef1f8';
        ctx.fillRect(barX, barY, barWidth, barHeight);

        const fillWidth = (item.percent / 100) * barWidth;
        ctx.fillStyle = '#cce97f';
        ctx.fillRect(barX, barY, fillWidth, barHeight);

        ctx.fillStyle = '#002855';
        ctx.fillText(avgText, barX, barY + barHeight + 16);

        y += 70;
      });

      const link = document.createElement('a');
      link.href = canvas.toDataURL('image/png');
      link.download = 'risultati_praxi_human_touch.png';
      link.click();
    }
  </script>
</body>
</html>